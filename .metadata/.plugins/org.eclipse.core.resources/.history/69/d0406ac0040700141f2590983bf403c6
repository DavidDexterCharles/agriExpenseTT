package fragments;

import helper.DHelper;
import helper.DbHelper;
import helper.DbQuery;

import java.util.ArrayList;
import java.util.Iterator;

import uwi.dcit.agriexpensett.UseResource;
import uwi.dcit.agriexpensett.ViewCycleUsege;
import uwi.dcit.agriexpensett.localCycle;
import uwi.dcit.agriexpensett.localCycleUse;
import android.app.Fragment;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

import com.example.agriexpensett.R;
import com.example.agriexpensett.rpurchaseendpoint.model.RPurchase;

import fragments.FragmentCycleUseCategory.Click;

public class FragmentGeneralCategory extends Fragment{
	TextView catMain;
	TextView catDet1;
	TextView catDet2;
	Button btn_useage;
	Button btn_useMore;
	View view;
	String category;
	localCycle currCycle;
	Double catTotal=0.0;
	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {
		view=inflater.inflate(R.layout.fragment_cycleuse_category_card, container, false);
		initialSetup();
		setupClick();
		//cycleId or cycleObject
		//category
		
		return view;
	}
	

	private void initialSetup() {
		//getting views
		catMain=(TextView)view.findViewById(R.id.tv_cycle_catMain);
		catDet1=(TextView)view.findViewById(R.id.tv_cycle_catDet1);;
		catDet2=(TextView)view.findViewById(R.id.tv_cycle_catDet2);;
		btn_useage=(Button)view.findViewById(R.id.btn_Cycle_useage);
		btn_useMore=(Button)view.findViewById(R.id.btn_Cycle_useMore);
		View line=view.findViewById(R.id.line);
		//getting data
		category=getArguments().getString("category");
		
	}
	
	
		//----------------------SETUP SUB CATEGORYS IF ANY
		
	private void setupClick() {
		// TODO Auto-generated method stub
		Click click=new Click();
		btn_useage.setOnClickListener(click);
		btn_useMore.setOnClickListener(click);

	}
	public class Click implements OnClickListener{

		@Override
		public void onClick(View v) {
			if(v.getId()==R.id.btn_Cycle_useage){
				Intent n=new Intent(getActivity(),ViewCycleUsege.class);
				n.putExtra("type",category);
				currCycle=getArguments().getParcelable("cycle");
				
				//Toast.makeText(getActivity(), currCycle.getId(), Toast.LENGTH_SHORT).show();
				n.putExtra("id",""+currCycle.getId());
				getActivity().startActivity(n);
			}else if(v.getId()==R.id.btn_Cycle_useMore){
				IntentLauncher launcher=new IntentLauncher();
				launcher.start();
			}
		}
		
	}
	private class IntentLauncher extends Thread{
		@Override
		public void run(){
			Bundle b=new Bundle();
			b.putParcelable("cyc",currCycle);
			Intent n=new Intent(getActivity(),UseResource.class);
			n.putExtra("cyc",b);
			n.putExtra("type",category);
			n.putExtra("total",""+catTotal);
			getActivity().startActivity(n);
			getActivity().finish();
		}
	}

}
